{"ast":null,"code":"import TakeBuket from './component/TakeBuket.vue';\nexport default {\n  inject: ['$axios'],\n  components: {\n    TakeBuket: TakeBuket\n  },\n  data() {\n    return {\n      onLoading: false,\n      courseData: {},\n      dataList: {\n        'all': [],\n        '1': [],\n        '2': [],\n        '3': [],\n        '4': [],\n        '5': [],\n        '6': [],\n        '7': [],\n        '8': []\n      },\n      filteredDataList: {\n        'all': [],\n        '1': [],\n        '2': [],\n        '3': [],\n        '4': [],\n        '5': [],\n        '6': [],\n        '7': [],\n        '8': []\n      },\n      selectedItems: [],\n      // 추가된 부분\n      tabId: \"tabs-all\",\n      semester: null,\n      semesterLabel: \"학기\" // Add this line\n    };\n  },\n  methods: {\n    handleTabClick(tabId) {\n      this.tabId = tabId;\n      this.semester = null;\n      this.semesterLabel = \"학기\"; // Reset the semester label when switching tabs\n      this.updateFilteredDataList();\n      this.handleSemesterClick(null);\n    },\n    handleSemesterClick(semester) {\n      this.semester = semester;\n      this.semesterLabel = semester === null ? \"전체\" : `${semester}학기`; // Update the semester label\n      this.updateFilteredDataList();\n    },\n    updateFilteredDataList() {\n      const year = this.tabId === 'tabs-all' ? null : this.tabId.split('-')[1];\n      if (year === null) {\n        this.filteredDataList = {\n          ...this.dataList\n        };\n      } else {\n        const yearGroup = parseInt(year) * 2;\n        if (this.semester === null) {\n          this.filteredDataList[yearGroup - 1] = this.dataList[yearGroup - 1];\n          this.filteredDataList[yearGroup] = this.dataList[yearGroup];\n        } else {\n          this.filteredDataList[yearGroup - 1] = this.semester === 1 ? this.dataList[yearGroup - 1] : [];\n          this.filteredDataList[yearGroup] = this.semester === 2 ? this.dataList[yearGroup] : [];\n        }\n      }\n    },\n    updateItem(takeId, item) {\n      if (!item.code || !item.grade || !item.myYear) {\n        this.$swal(\"영역, 학점, 이수학기를 모두 입력하세요.\", '', \"warning\");\n        return;\n      }\n      this.onLoading = true;\n      const userId = localStorage.getItem('memberId');\n      const updateTakenCourseDTO = {\n        takenTerm: Number(item.myYear),\n        // 이수학년\n        grade: String(item.myGrade),\n        // 성적 (문자열로 변환)\n        category: String(item.categoryName)\n      };\n      const bindingResult = {};\n      this.$axios.patch(`/v1/courses/take/${takeId}`, updateTakenCourseDTO, bindingResult, {\n        params: {\n          memberId: userId // 실제 사용자 ID로 변경\n        }\n      }).then(response => {\n        console.log('응답 받음:', response.data);\n        this.$refs.updateModalComponent.closeModal();\n        this.$swal(\"수정완료\", '', 'success').then(() => {\n          this.fetchData();\n        });\n      }).catch(error => {\n        console.error('오류 발생2:', error);\n        this.$swal(\"수정에 실패했습니다.\", '', \"error\");\n      }).finally(() => {\n        this.onLoading = false;\n      });\n    },\n    toggleModal(item) {\n      // 장바구니 모달 여는 함수\n      this.courseData = {\n        hak: item.courseCode,\n        // 학수번호\n        courseId: item.courseId,\n        name: item.courseName,\n        // 과목명\n        code: item.categoryName,\n        // 영역\n        grade: item.credit,\n        // 학점\n        year: item.level,\n        // 이수학년\n        people: item.takenNumber // 수강인원\n      };\n      this.modalType = item.takeId;\n      this.$refs.updateModalComponent.clickModal();\n    },\n    fetchData() {\n      this.onLoading = true;\n      const userId = localStorage.getItem('memberId');\n      this.$axios.get('/v1/courses/take', {\n        params: {\n          memberId: userId // 실제 사용자 ID로 변경\n        }\n      }).then(response => {\n        const responseList = response.data.result.takenCourseDTOList; // 서버에서 받은 데이터에 맞게 변경\n        if (Array.isArray(responseList)) {\n          this.dataList.all = responseList;\n          this.loadAllTabsData();\n          this.updateFilteredDataList();\n        } else {\n          console.error('받은 데이터가 배열이 아닙니다:', responseList);\n        }\n      }).catch(error => {\n        console.error('데이터 가져오기 실패:', error);\n        this.$swal(\"로그인을 해주세요.\", '', \"error\");\n      }).finally(() => {\n        this.onLoading = false;\n      });\n    },\n    loadAllTabsData() {\n      this.dataList['1'] = this.filterDataByYear(1);\n      this.dataList['2'] = this.filterDataByYear(2);\n      this.dataList['3'] = this.filterDataByYear(3);\n      this.dataList['4'] = this.filterDataByYear(4);\n      this.dataList['5'] = this.filterDataByYear(5);\n      this.dataList['6'] = this.filterDataByYear(6);\n      this.dataList['7'] = this.filterDataByYear(7);\n      this.dataList['8'] = this.filterDataByYear(8);\n      this.updateFilteredDataList();\n    },\n    filterDataByYear(year) {\n      return this.dataList.all.filter(item => item.takenLevel === year);\n    },\n    confirmDelete() {\n      if (this.selectedItems.length === 0) {\n        alert('삭제할 항목을 선택하세요.');\n        return;\n      }\n      if (confirm(\"정말 삭제하시겠습니까?\")) {\n        this.deleteSelectedItems();\n      }\n    },\n    confirmUpdate(takeId, item) {\n      if (confirm(\"정말 수정하시겠습니까?\")) {\n        this.updateItem(takeId, item);\n      }\n    },\n    deleteSelectedItems() {\n      if (this.selectedItems.length === 0) {\n        alert('삭제할 항목을 선택하세요.');\n        return;\n      }\n      const promises = this.selectedItems.map(takeId => {\n        return this.$axios.delete(`/v1/courses/take/${takeId}`);\n      });\n      Promise.all(promises).then(() => {\n        alert('삭제 성공');\n        this.fetchData();\n        this.selectedItems = []; // 선택 항목 초기화\n      }).catch(error => {\n        console.error('삭제 실패:', error);\n        alert('삭제 실패');\n      });\n    }\n  },\n  mounted() {\n    this.fetchData(); // 컴포넌트가 마운트될 때 데이터 가져오기\n    this.handleSemesterClick(null);\n  }\n};","map":{"version":3,"names":["TakeBuket","inject","components","data","onLoading","courseData","dataList","filteredDataList","selectedItems","tabId","semester","semesterLabel","methods","handleTabClick","updateFilteredDataList","handleSemesterClick","year","split","yearGroup","parseInt","updateItem","takeId","item","code","grade","myYear","$swal","userId","localStorage","getItem","updateTakenCourseDTO","takenTerm","Number","String","myGrade","category","categoryName","bindingResult","$axios","patch","params","memberId","then","response","console","log","$refs","updateModalComponent","closeModal","fetchData","catch","error","finally","toggleModal","hak","courseCode","courseId","name","courseName","credit","level","people","takenNumber","modalType","clickModal","get","responseList","result","takenCourseDTOList","Array","isArray","all","loadAllTabsData","filterDataByYear","filter","takenLevel","confirmDelete","length","alert","confirm","deleteSelectedItems","confirmUpdate","promises","map","delete","Promise","mounted"],"sources":["/Users/gimdongha/Desktop/cloudcomputing/i-curriculum_FE/src/views/coursemangent/MyTake.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"page-header\">\n            <div class=\"row align-items-end\" style=\"height: 41px;\">\n                <div class=\"row pe-0\">\n                    <div class=\"col-12\">\n                        <div class=\"page-pretitle\"></div>\n                        <div class=\"btn-list justify-content-between align-items-center w-100\" style=\"height: 25px;\">\n                            <h2 class=\"page-title\">이수내역</h2>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"hr-text\"></div>\n        <!-- 화면 시작-->\n        <div class=\"card\">\n            <div class=\"card-header\">\n                <ul class=\"nav nav-tabs card-header-tabs\" data-bs-toggle=\"tabs\">\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-all\" :class=\"{ active: tabId === 'tabs-all' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-all')\" data-bs-toggle=\"tab\">전체</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-1\" :class=\"{ active: tabId === 'tabs-1' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-1')\" data-bs-toggle=\"tab\">1학년</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-2\" :class=\"{ active: tabId === 'tabs-2' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-2')\" data-bs-toggle=\"tab\">2학년</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-3\" :class=\"{ active: tabId === 'tabs-3' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-3')\" data-bs-toggle=\"tab\">3학년</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-4\" :class=\"{ active: tabId === 'tabs-4' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-4')\" data-bs-toggle=\"tab\">4학년</a>\n                    </li>\n                    <!-- <li class=\"nav-item dropdown\">\n                        <a class=\"nav-link dropdown-toggle\" data-bs-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">{{ semesterLabel }}</a>\n                        <div class=\"dropdown-menu\">\n                            <a class=\"dropdown-item\" href=\"#\" @click=\"handleSemesterClick(null)\">전체</a>\n                            <a class=\"dropdown-item\" href=\"#\" @click=\"handleSemesterClick(1)\">1학기</a>\n                            <a class=\"dropdown-item\" href=\"#\" @click=\"handleSemesterClick(2)\">2학기</a>\n                        </div>\n                    </li> -->\n                </ul>\n            </div>\n<!--데이터를 불러오는중이면 로딩바-->\n<div v-if=\"onLoading\" class=\"progress progress-sm\">\n                    <div class=\"progress-bar progress-bar-indeterminate bg-red\"></div>\n                </div>\n            <div v-else class=\"card-body\">\n                <div class=\"tab-content\">\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-all' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학년</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList.all.length\">\n                                        <tr v-for=\"item in filteredDataList.all\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr>\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-1' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학년</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['1'].length\">\n                                        <tr v-for=\"item in filteredDataList['1']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr>\n                                        <!-- <tr v-for=\"item in filteredDataList['2']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr> -->\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-2' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학년</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['2'].length\">\n                                        <tr v-for=\"item in filteredDataList['2']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr>\n                                        <!-- <tr v-for=\"item in filteredDataList['4']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr> -->\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-3' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학년</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['3'].length\">\n                                        <tr v-for=\"item in filteredDataList['3']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr>\n                                        <!-- <tr v-for=\"item in filteredDataList['6']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr> -->\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-4' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학년</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['4'].length\">\n                                        <tr v-for=\"item in filteredDataList['4']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr>\n                                        <!-- <tr v-for=\"item in filteredDataList['8']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\">수정</button>\n\n                                        </tr> -->\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n\n        <TakeBuket ref=\"updateModalComponent\" :modalType=\"modalType\" :courseData=\"courseData\" :updateItem=\"updateItem\">\n\n        </TakeBuket>\n    </div>\n</template>\n\n<script>\nimport TakeBuket from './component/TakeBuket.vue'\nexport default {\n    inject: ['$axios'],\n    components: {\n        TakeBuket: TakeBuket,\n    },\n    data() {\n        return {\n            onLoading:false,\n            courseData: {},\n            dataList: {\n                'all': [],\n                '1': [],\n                '2': [],\n                '3': [],\n                '4': [],\n                '5': [],\n                '6': [],\n                '7': [],\n                '8': [],\n            },\n            filteredDataList: {\n                'all': [],\n                '1': [],\n                '2': [],\n                '3': [],\n                '4': [],\n                '5': [],\n                '6': [],\n                '7': [],\n                '8': [],\n            },\n            selectedItems: [], // 추가된 부분\n            tabId: \"tabs-all\",\n            semester: null,\n            semesterLabel: \"학기\", // Add this line\n        }\n    },\n    methods: {\n        handleTabClick(tabId) {\n            this.tabId = tabId;\n            this.semester = null;\n            this.semesterLabel = \"학기\"; // Reset the semester label when switching tabs\n            this.updateFilteredDataList();\n            this.handleSemesterClick(null);\n        },\n        handleSemesterClick(semester) {\n            this.semester = semester;\n            this.semesterLabel = semester === null ? \"전체\" : `${semester}학기`; // Update the semester label\n            this.updateFilteredDataList();\n        },\n        updateFilteredDataList() {\n            const year = this.tabId === 'tabs-all' ? null : this.tabId.split('-')[1];\n            if (year === null) {\n                this.filteredDataList = { ...this.dataList };\n            } else {\n                const yearGroup = parseInt(year) * 2;\n                if (this.semester === null) {\n                    this.filteredDataList[yearGroup - 1] = this.dataList[yearGroup - 1];\n                    this.filteredDataList[yearGroup] = this.dataList[yearGroup];\n                } else {\n                    this.filteredDataList[yearGroup - 1] = this.semester === 1 ? this.dataList[yearGroup - 1] : [];\n                    this.filteredDataList[yearGroup] = this.semester === 2 ? this.dataList[yearGroup] : [];\n                }\n            }\n        },\n        updateItem(takeId, item) {\n\n            if (!item.code || !item.grade || !item.myYear) {\n                this.$swal(\"영역, 학점, 이수학기를 모두 입력하세요.\", '', \"warning\");\n                return;\n            }\n\n\n\n            this.onLoading = true;\n            const userId = localStorage.getItem('memberId');\n            const updateTakenCourseDTO = {\n                takenTerm: Number(item.myYear), // 이수학년\n                grade: String(item.myGrade), // 성적 (문자열로 변환)\n                category: String(item.categoryName)\n            };\n            const bindingResult = {};\n            this.$axios.patch(`/v1/courses/take/${takeId}`, updateTakenCourseDTO, bindingResult, {\n                params: {\n                    memberId: userId // 실제 사용자 ID로 변경\n                }\n            })\n                .then(response => {\n                    console.log('응답 받음:', response.data);\n                    this.$refs.updateModalComponent.closeModal();\n                    this.$swal(\"수정완료\", '', 'success')\n                    .then(() => {\n                        this.fetchData();\n                    })\n                })\n                .catch(error => {\n                    console.error('오류 발생2:', error);\n                    this.$swal(\"수정에 실패했습니다.\", '', \"error\");\n                })\n                .finally(() => {\n                    this.onLoading = false;\n                });\n        },\n        toggleModal(item) { // 장바구니 모달 여는 함수\n            this.courseData = {\n                    hak: item.courseCode, // 학수번호\n                    courseId: item.courseId,\n                    name: item.courseName, // 과목명\n                    code: item.categoryName, // 영역\n                    grade: item.credit, // 학점\n                    year: item.level, // 이수학년\n                    people: item.takenNumber // 수강인원\n                };\n            this.modalType = item.takeId;\n            this.$refs.updateModalComponent.clickModal();\n        },\n        fetchData() {\n            this.onLoading = true;\n            const userId = localStorage.getItem('memberId');\n            \n            this.$axios.get('/v1/courses/take', {\n                params: {\n                    memberId: userId // 실제 사용자 ID로 변경\n                }\n            })\n                .then(response => {\n                    const responseList = response.data.result.takenCourseDTOList; // 서버에서 받은 데이터에 맞게 변경\n                    if (Array.isArray(responseList)) {\n                        this.dataList.all = responseList;\n                        this.loadAllTabsData();\n                        this.updateFilteredDataList();\n                    } else {\n                        console.error('받은 데이터가 배열이 아닙니다:', responseList);\n                    }\n                })\n                .catch(error => {\n                    console.error('데이터 가져오기 실패:', error);\n\n                    this.$swal(\"로그인을 해주세요.\", '', \"error\");\n\n                })\n                .finally(() => {\n                    this.onLoading = false;\n                });\n        },\n        loadAllTabsData() {\n            this.dataList['1'] = this.filterDataByYear(1);\n            this.dataList['2'] = this.filterDataByYear(2);\n            this.dataList['3'] = this.filterDataByYear(3);\n            this.dataList['4'] = this.filterDataByYear(4);\n            this.dataList['5'] = this.filterDataByYear(5);\n            this.dataList['6'] = this.filterDataByYear(6);\n            this.dataList['7'] = this.filterDataByYear(7);\n            this.dataList['8'] = this.filterDataByYear(8);\n            this.updateFilteredDataList();\n        },\n        filterDataByYear(year) {\n            return this.dataList.all.filter(item => item.takenLevel === year);\n        },\n        confirmDelete() {\n            if (this.selectedItems.length === 0) {\n                alert('삭제할 항목을 선택하세요.');\n                return;\n            }\n            if (confirm(\"정말 삭제하시겠습니까?\")) {\n                this.deleteSelectedItems();\n            }\n        },\n\n        confirmUpdate(takeId, item) {\n            if (confirm(\"정말 수정하시겠습니까?\")) {\n                this.updateItem(takeId, item);\n            }\n        },\n\n\n\n        deleteSelectedItems() {\n            if (this.selectedItems.length === 0) {\n                alert('삭제할 항목을 선택하세요.');\n                return;\n            }\n            const promises = this.selectedItems.map(takeId => {\n                return this.$axios.delete(`/v1/courses/take/${takeId}`);\n            });\n\n            Promise.all(promises)\n                .then(() => {\n                    alert('삭제 성공');\n                    this.fetchData();\n                    this.selectedItems = []; // 선택 항목 초기화\n                })\n                .catch(error => {\n                    console.error('삭제 실패:', error);\n                    alert('삭제 실패');\n                });\n        }\n    },\n    mounted() {\n        this.fetchData(); // 컴포넌트가 마운트될 때 데이터 가져오기\n        this.handleSemesterClick(null);\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}