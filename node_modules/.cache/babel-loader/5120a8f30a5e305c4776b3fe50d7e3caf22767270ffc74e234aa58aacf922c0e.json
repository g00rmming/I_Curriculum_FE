{"ast":null,"code":"import TakeBuket from './component/TakeBuket.vue';\nexport default {\n  inject: ['$axios'],\n  components: {\n    TakeBuket: TakeBuket\n  },\n  data() {\n    return {\n      courseData: {},\n      dataList: {\n        'all': [],\n        '1': [],\n        '2': [],\n        '3': [],\n        '4': [],\n        '5': [],\n        '6': [],\n        '7': [],\n        '8': []\n      },\n      filteredDataList: {\n        'all': [],\n        '1': [],\n        '2': [],\n        '3': [],\n        '4': [],\n        '5': [],\n        '6': [],\n        '7': [],\n        '8': []\n      },\n      selectedItems: [],\n      // 추가된 부분\n      tabId: \"tabs-all\",\n      semester: null,\n      semesterLabel: \"학기\" // Add this line\n    };\n  },\n  methods: {\n    handleTabClick(tabId) {\n      this.tabId = tabId;\n      this.semester = null;\n      this.semesterLabel = \"학기\"; // Reset the semester label when switching tabs\n      this.updateFilteredDataList();\n      this.handleSemesterClick(null);\n    },\n    handleSemesterClick(semester) {\n      this.semester = semester;\n      this.semesterLabel = semester === null ? \"전체\" : `${semester}학기`; // Update the semester label\n      this.updateFilteredDataList();\n    },\n    updateFilteredDataList() {\n      const year = this.tabId === 'tabs-all' ? null : this.tabId.split('-')[1];\n      if (year === null) {\n        this.filteredDataList = {\n          ...this.dataList\n        };\n      } else {\n        const yearGroup = parseInt(year) * 2;\n        if (this.semester === null) {\n          this.filteredDataList[yearGroup - 1] = this.dataList[yearGroup - 1];\n          this.filteredDataList[yearGroup] = this.dataList[yearGroup];\n        } else {\n          this.filteredDataList[yearGroup - 1] = this.semester === 1 ? this.dataList[yearGroup - 1] : [];\n          this.filteredDataList[yearGroup] = this.semester === 2 ? this.dataList[yearGroup] : [];\n        }\n      }\n    },\n    updateItem(takeId, item) {\n      const userId = localStorage.getItem('memberId');\n      const updateTakenCourseDTO = {\n        takenTerm: Number(item.takenLevel),\n        // 이수학기\n        grade: String(item.grade) // 성적 (문자열로 변환)\n      };\n      console.log(\"dong1\", takeId);\n      this.$axios.patch(`/v1/courses/take/${takeId}`, updateTakenCourseDTO, {\n        params: {\n          memberId: userId // 실제 사용자 ID로 변경\n        }\n      }).then(response => {\n        console.log('응답 받음:', response.data);\n        this.$refs.updateModalComponent.closeModal();\n        this.$swal(\"수정완료\", '', 'success');\n      }).catch(error => {\n        console.error('오류 발생2:', error);\n        this.$swal(\"수정에 실패했습니다.\", '', \"error\");\n      });\n    },\n    toggleModal(item) {\n      // 장바구니 모달 여는 함수\n      this.courseData = {\n        hak: item.courseCode,\n        // 학수번호\n        courseId: item.courseId,\n        name: item.courseName,\n        // 과목명\n        code: item.categoryName,\n        // 영역\n        grade: item.credit,\n        // 학점\n        year: item.level,\n        // 이수학기\n        people: item.takenNumber // 수강인원\n      };\n      this.modalType = item.takeId;\n      this.$refs.updateModalComponent.clickModal();\n    },\n    fetchData() {\n      const userId = localStorage.getItem('memberId');\n      this.$axios.get('/v1/courses/take', {\n        params: {\n          memberId: userId // 실제 사용자 ID로 변경\n        }\n      }).then(response => {\n        const responseList = response.data.result.takenCourseDTOList; // 서버에서 받은 데이터에 맞게 변경\n        console.log('받은 데이터:', responseList); // 받아온 데이터 로그\n        if (Array.isArray(responseList)) {\n          this.dataList.all = responseList;\n          this.loadAllTabsData();\n          this.updateFilteredDataList();\n        } else {\n          console.error('받은 데이터가 배열이 아닙니다:', responseList);\n        }\n      }).catch(error => {\n        console.error('데이터 가져오기 실패:', error);\n        this.$swal(\"로그인을 해주세요.\", '', \"error\");\n      });\n    },\n    loadAllTabsData() {\n      this.dataList['1'] = this.filterDataByYear(1);\n      this.dataList['2'] = this.filterDataByYear(2);\n      this.dataList['3'] = this.filterDataByYear(3);\n      this.dataList['4'] = this.filterDataByYear(4);\n      this.dataList['5'] = this.filterDataByYear(5);\n      this.dataList['6'] = this.filterDataByYear(6);\n      this.dataList['7'] = this.filterDataByYear(7);\n      this.dataList['8'] = this.filterDataByYear(8);\n      this.updateFilteredDataList();\n    },\n    filterDataByYear(year) {\n      return this.dataList.all.filter(item => item.takenLevel === year);\n    },\n    confirmDelete() {\n      if (this.selectedItems.length === 0) {\n        alert('삭제할 항목을 선택하세요.');\n        return;\n      }\n      if (confirm(\"정말 삭제하시겠습니까?\")) {\n        this.deleteSelectedItems();\n      }\n    },\n    deleteSelectedItems() {\n      if (this.selectedItems.length === 0) {\n        alert('삭제할 항목을 선택하세요.');\n        return;\n      }\n      const promises = this.selectedItems.map(takeId => {\n        return this.$axios.delete(`/v1/courses/take/${takeId}`);\n      });\n      Promise.all(promises).then(() => {\n        alert('삭제 성공');\n        this.fetchData();\n        this.selectedItems = []; // 선택 항목 초기화\n      }).catch(error => {\n        console.error('삭제 실패:', error);\n        alert('삭제 실패');\n      });\n    }\n  },\n  mounted() {\n    this.fetchData(); // 컴포넌트가 마운트될 때 데이터 가져오기\n    this.handleSemesterClick(null);\n  }\n};","map":{"version":3,"names":["TakeBuket","inject","components","data","courseData","dataList","filteredDataList","selectedItems","tabId","semester","semesterLabel","methods","handleTabClick","updateFilteredDataList","handleSemesterClick","year","split","yearGroup","parseInt","updateItem","takeId","item","userId","localStorage","getItem","updateTakenCourseDTO","takenTerm","Number","takenLevel","grade","String","console","log","$axios","patch","params","memberId","then","response","$refs","updateModalComponent","closeModal","$swal","catch","error","toggleModal","hak","courseCode","courseId","name","courseName","code","categoryName","credit","level","people","takenNumber","modalType","clickModal","fetchData","get","responseList","result","takenCourseDTOList","Array","isArray","all","loadAllTabsData","filterDataByYear","filter","confirmDelete","length","alert","confirm","deleteSelectedItems","promises","map","delete","Promise","mounted"],"sources":["/Users/gimdongha/Desktop/cloudcomputing/i-curriculum_FE/src/views/coursemangent/MyTake.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"page-header\">\n            <div class=\"row align-items-end\" style=\"height: 41px;\">\n                <div class=\"row pe-0\">\n                    <div class=\"col-12\">\n                        <div class=\"page-pretitle\"></div>\n                        <div class=\"btn-list justify-content-between align-items-center w-100\" style=\"height: 25px;\">\n                            <h2 class=\"page-title\">이수내역</h2>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"hr-text\"></div>\n        <!-- 화면 시작-->\n        <div class=\"card\">\n            <div class=\"card-header\">\n                <ul class=\"nav nav-tabs card-header-tabs\" data-bs-toggle=\"tabs\">\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-all\" :class=\"{ active: tabId === 'tabs-all' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-all')\" data-bs-toggle=\"tab\">전체</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-1\" :class=\"{ active: tabId === 'tabs-1' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-1')\" data-bs-toggle=\"tab\">1학년</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-2\" :class=\"{ active: tabId === 'tabs-2' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-2')\" data-bs-toggle=\"tab\">2학년</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-3\" :class=\"{ active: tabId === 'tabs-3' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-3')\" data-bs-toggle=\"tab\">3학년</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a href=\"#tabs-4\" :class=\"{ active: tabId === 'tabs-4' }\" class=\"nav-link\"\n                            @click=\"handleTabClick('tabs-4')\" data-bs-toggle=\"tab\">4학년</a>\n                    </li>\n                    <li class=\"nav-item dropdown\">\n                        <a class=\"nav-link dropdown-toggle\" data-bs-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">{{ semesterLabel }}</a>\n                        <div class=\"dropdown-menu\">\n                            <a class=\"dropdown-item\" href=\"#\" @click=\"handleSemesterClick(null)\">전체</a>\n                            <a class=\"dropdown-item\" href=\"#\" @click=\"handleSemesterClick(1)\">1학기</a>\n                            <a class=\"dropdown-item\" href=\"#\" @click=\"handleSemesterClick(2)\">2학기</a>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"card-body\">\n                <div class=\"tab-content\">\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-all' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학기</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList.all.length\">\n                                        <tr v-for=\"item in filteredDataList.all\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-1' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학기</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['1'].length || filteredDataList['2'].length\">\n                                        <tr v-for=\"item in filteredDataList['1']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                        <tr v-for=\"item in filteredDataList['2']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-2' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학기</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['3'].length || filteredDataList['4'].length\">\n                                        <tr v-for=\"item in filteredDataList['3']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                        <tr v-for=\"item in filteredDataList['4']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-3' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학기</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['5'].length || filteredDataList['6'].length\">\n                                        <tr v-for=\"item in filteredDataList['5']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                        <tr v-for=\"item in filteredDataList['6']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    <div class=\"tab-pane\" :class=\"{ active: tabId === 'tabs-4' }\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                            <div>\n                            </div>\n                            <a href=\"#\" class=\"btn btn-pill\" style=\"padding: 0.3rem;\" @click=\"confirmDelete\">\n                                삭제\n                            </a>\n                        </div>\n                        <div class=\"table-responsive\">\n                            <table class=\"table table-vcenter\">\n                                <thead>\n                                    <colgroup>\n                                        <col style=\"width: 5%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 20%;\">\n                                        <col style=\"width: 15%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 10%;\">\n                                        <col style=\"width: 5%;\">\n                                    </colgroup>\n                                    <tr>\n                                        <th>선택</th>\n                                        <th>학수번호</th>\n                                        <th>과목명</th>\n                                        <th>영역</th>\n                                        <th>학점</th>\n                                        <th>성적</th>\n                                        <th>이수학기</th>\n                                        <th>수강인원</th>\n                                        <th></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <template v-if=\"filteredDataList['7'].length || filteredDataList['8'].length\">\n                                        <tr v-for=\"item in filteredDataList['7']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                        <tr v-for=\"item in filteredDataList['8']\" :key=\"item.takeId\">\n                                            <td><input type=\"checkbox\" v-model=\"selectedItems\" :value=\"item.takeId\"></td>\n                                            <td>{{ item.courseCode }}</td>\n                                            <td>{{ item.courseName }}</td>\n                                            <td>{{ item.categoryName }}</td>\n                                            <td>{{ item.grade }}</td>\n                                            <td>{{ item.credit }}</td>\n                                            <td>{{ item.takenLevel }}</td>\n                                            <td>{{ item.people }}</td>\n                                            <button @click=\"toggleModal(item)\" class=\"btn btn-primary\">수정</button>\n                                        </tr>\n                                    </template>\n                                    <template v-else>\n                                        <tr>\n                                            <td colspan=\"7\" class=\"text-center\">조회된 데이터가 없습니다.</td>\n                                        </tr>\n                                    </template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <TakeBuket ref=\"updateModalComponent\" :modalType=\"modalType\" :courseData=\"courseData\" :updateItem=\"updateItem\">\n        </TakeBuket>\n    </div>\n</template>\n\n<script>\nimport TakeBuket from './component/TakeBuket.vue'\nexport default {\n    inject: ['$axios'],\n    components: {\n        TakeBuket: TakeBuket,\n    },\n    data() {\n        return {\n            courseData: {},\n            dataList: {\n                'all': [],\n                '1': [],\n                '2': [],\n                '3': [],\n                '4': [],\n                '5': [],\n                '6': [],\n                '7': [],\n                '8': [],\n            },\n            filteredDataList: {\n                'all': [],\n                '1': [],\n                '2': [],\n                '3': [],\n                '4': [],\n                '5': [],\n                '6': [],\n                '7': [],\n                '8': [],\n            },\n            selectedItems: [], // 추가된 부분\n            tabId: \"tabs-all\",\n            semester: null,\n            semesterLabel: \"학기\", // Add this line\n        }\n    },\n    methods: {\n        handleTabClick(tabId) {\n            this.tabId = tabId;\n            this.semester = null;\n            this.semesterLabel = \"학기\"; // Reset the semester label when switching tabs\n            this.updateFilteredDataList();\n            this.handleSemesterClick(null);\n        },\n        handleSemesterClick(semester) {\n            this.semester = semester;\n            this.semesterLabel = semester === null ? \"전체\" : `${semester}학기`; // Update the semester label\n            this.updateFilteredDataList();\n        },\n        updateFilteredDataList() {\n            const year = this.tabId === 'tabs-all' ? null : this.tabId.split('-')[1];\n            if (year === null) {\n                this.filteredDataList = { ...this.dataList };\n            } else {\n                const yearGroup = parseInt(year) * 2;\n                if (this.semester === null) {\n                    this.filteredDataList[yearGroup - 1] = this.dataList[yearGroup - 1];\n                    this.filteredDataList[yearGroup] = this.dataList[yearGroup];\n                } else {\n                    this.filteredDataList[yearGroup - 1] = this.semester === 1 ? this.dataList[yearGroup - 1] : [];\n                    this.filteredDataList[yearGroup] = this.semester === 2 ? this.dataList[yearGroup] : [];\n                }\n            }\n        },\n        updateItem(takeId, item) {\n            const userId = localStorage.getItem('memberId');\n            const updateTakenCourseDTO = {\n                takenTerm: Number(item.takenLevel), // 이수학기\n                grade: String(item.grade), // 성적 (문자열로 변환)\n            };\n            console.log(\"dong1\", takeId);\n            this.$axios.patch(`/v1/courses/take/${takeId}`, updateTakenCourseDTO, {\n                params: {\n                    memberId: userId // 실제 사용자 ID로 변경\n                }\n            })\n                .then(response => {\n                    console.log('응답 받음:', response.data);\n                    this.$refs.updateModalComponent.closeModal();\n                    this.$swal(\"수정완료\", '', 'success');\n                })\n                .catch(error => {\n                    console.error('오류 발생2:', error);\n                    this.$swal(\"수정에 실패했습니다.\", '', \"error\");\n                });\n        },\n        toggleModal(item) { // 장바구니 모달 여는 함수\n            this.courseData = {\n                    hak: item.courseCode, // 학수번호\n                    courseId: item.courseId,\n                    name: item.courseName, // 과목명\n                    code: item.categoryName, // 영역\n                    grade: item.credit, // 학점\n                    year: item.level, // 이수학기\n                    people: item.takenNumber // 수강인원\n                };\n            this.modalType = item.takeId;\n            this.$refs.updateModalComponent.clickModal();\n        },\n        fetchData() {\n            const userId = localStorage.getItem('memberId');\n            this.$axios.get('/v1/courses/take', {\n                params: {\n                    memberId: userId // 실제 사용자 ID로 변경\n                }\n            })\n                .then(response => {\n                    const responseList = response.data.result.takenCourseDTOList; // 서버에서 받은 데이터에 맞게 변경\n                    console.log('받은 데이터:', responseList); // 받아온 데이터 로그\n                    if (Array.isArray(responseList)) {\n                        this.dataList.all = responseList;\n                        this.loadAllTabsData();\n                        this.updateFilteredDataList();\n                    } else {\n                        console.error('받은 데이터가 배열이 아닙니다:', responseList);\n                    }\n                })\n                .catch(error => {\n                    console.error('데이터 가져오기 실패:', error);\n                    this.$swal(\"로그인을 해주세요.\", '', \"error\");\n                });\n        },\n        loadAllTabsData() {\n            this.dataList['1'] = this.filterDataByYear(1);\n            this.dataList['2'] = this.filterDataByYear(2);\n            this.dataList['3'] = this.filterDataByYear(3);\n            this.dataList['4'] = this.filterDataByYear(4);\n            this.dataList['5'] = this.filterDataByYear(5);\n            this.dataList['6'] = this.filterDataByYear(6);\n            this.dataList['7'] = this.filterDataByYear(7);\n            this.dataList['8'] = this.filterDataByYear(8);\n            this.updateFilteredDataList();\n        },\n        filterDataByYear(year) {\n            return this.dataList.all.filter(item => item.takenLevel === year);\n        },\n        confirmDelete() {\n            if (this.selectedItems.length === 0) {\n                alert('삭제할 항목을 선택하세요.');\n                return;\n            }\n            if (confirm(\"정말 삭제하시겠습니까?\")) {\n                this.deleteSelectedItems();\n            }\n        },\n\n        deleteSelectedItems() {\n            if (this.selectedItems.length === 0) {\n                alert('삭제할 항목을 선택하세요.');\n                return;\n            }\n            const promises = this.selectedItems.map(takeId => {\n                return this.$axios.delete(`/v1/courses/take/${takeId}`);\n            });\n\n            Promise.all(promises)\n                .then(() => {\n                    alert('삭제 성공');\n                    this.fetchData();\n                    this.selectedItems = []; // 선택 항목 초기화\n                })\n                .catch(error => {\n                    console.error('삭제 실패:', error);\n                    alert('삭제 실패');\n                });\n        }\n    },\n    mounted() {\n        this.fetchData(); // 컴포넌트가 마운트될 때 데이터 가져오기\n        this.handleSemesterClick(null);\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}